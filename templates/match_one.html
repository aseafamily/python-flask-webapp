<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ match_data.player1_first_name }}' Match {{ match_data.Match.id }}</title>
    <style>
        :root {
            --on-color-primary: #ffffff;
            --on-surface-nLv1: #222226;
            --on-surface-nLv3: rgba(34, 34, 38, 0.45);
            --on-surface-nLv4: rgba(34, 34, 38, 0.15);
            --on-surface-nLv5: rgba(34, 34, 38, 0.06);
            --error-default: #c7361f;
            --surface-s0: #edf1f6;
            --surface-s1: #ffffff;
            --playoffs-promotion-to-x-playoff: #0a8dff;
            --effect-elevation: rgba(34, 34, 38, 0.08);
            --primary-default: #374df5;
            --secondary-default: #0bb32a;
            --terrain-grass:#62bd40;
            --sofa-singles-value:#e59c03;
        }

        body {
            overflow-x: hidden;
            width: 100%;
            -webkit-font-smoothing: antialiased;
            font-family: "Sofascore Sans", "Arial Unicode MS", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-weight: 400;
            color: var(--on-surface-nLv1);
            background-color: var(--surface-s0);
            font-feature-settings: "kern";
            font-kerning: normal;
            margin: 0;
        }

        .bPNjiv {
            background-color: var(--surface-s1);
        }

        .bnpRyo {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: justify;
            justify-content: space-between;
        }

        .dlyXLO {
            display: flex;
            padding: 8px 16px;
        }

        .lfqAOf {
            height: 100%;
        }

        .iZgchw {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
            flex-direction: row;
        }

        a {
            text-decoration: none;
        }

        .kFvGEE {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
        }

        .ddaRLc {
            display: flex;
            position: relative;
            margin-left: 8px;
        }

        .cORqut {
            position: relative;
        }

        .jbaYme {
            object-fit: cover;
        }

        img {
            border-style: none;
        }

        .HwWyM {
            position: absolute;
            top: 24px;
            left: 0px;
        }

        .hpocRq {
            border-radius: 50%;
            object-fit: cover;
        }

        .kshPLE {
            display: inline-flex;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
        }

        .kHVrPs {
            display: inline-flex;
            background-color: var(--playoffs-promotion-to-x-playoff);
            position: absolute;
            right: 0px;
            bottom: 2px;
            z-index: 1;
            height: 12px;
            min-width: 16px;
            border-radius: 8px;
        }

        .gprDYG {
            color: var(--surface-s1);
            text-align: left;
            font: 500 10px / 1 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }

        .gtmGgU {
            padding-left: 16px;
        }

        .jzDXwu {
            color: var(--on-surface-nLv1);
            text-align: left;
            display: block;
            font: 700 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            text-overflow: ellipsis;
            overflow-x: clip;
            white-space: nowrap;
            min-width: 0px;
        }

        .hKtpIg {
            color: var(--on-surface-nLv3);
            text-align: left;
            display: block;
            font: 700 12px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            text-overflow: ellipsis;
            overflow-x: clip;
            white-space: nowrap;
            min-width: 0px;
        }

        .dsybxc {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
            flex-direction: column;
        }

        .eJCdjm {
            display: flex;
            width: 100%;
        }

        .gyrVAS {
            display: flex;
            -webkit-box-pack: end;
            justify-content: flex-end;
        }

        .hQZSQ {
            display: flex;
            height: 84px;
            width: 100%;
        }

        .cIAUBs {
            display: flex;
            align-items: flex-end;
            -webkit-box-pack: justify;
            justify-content: space-between;
            flex-direction: column;
        }

        .hELCex {
            display: flex;
            padding-top: 4px;
            padding-bottom: 4px;
        }

        .cORqut {
            position: relative;
        }

        .gvJSKx {
            position: relative;
            border: 1px solid transparent;
            overflow: hidden;
        }

        .MkeW {
            display: flex;
            align-items: flex-end;
            flex-direction: column;
        }

        .jTiCHC {
            display: flex;
            position: relative;
            height: 17px;
            min-width: 20px;
        }

        .gvJSKx .previousScore, .gvJSKx .currentScore {
            min-width: 16px;
            position: relative;
        }

        .won_score {
            background-color: unset;
            color: var(--on-surface-nLv1);
            text-align: center;
            font: 400 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }

        .gvJSKx .previousScore, .gvJSKx .currentScore {
            min-width: 16px;
            position: relative;
        }

        .lost_score {
            background-color: unset;
            color: var(--on-surface-nLv3);
            text-align: center;
            font: 400 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }

        .bnvMps {
            display: flex;
            -webkit-box-pack: justify;
            justify-content: space-between;
            flex-direction: column;
        }

        .fxruDL {
            display: flex;
            height: 100%;
        }

        .kFvGEE {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
        }

        .bSuBER {
            display: flex;
            height: 24px;
        }

        .yZqSj {
            display: inline-block;
            flex: 0 0 1px;
            align-self: stretch;
            width: 1px;
            background-color: var(--on-surface-nLv4);
            margin-left: 8px;
            margin-right: 8px;
        }

        .match_lost {
            color: var(--on-surface-nLv3);
            text-align: center;
            font: 400 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }

        .fFdGkQ .previousScore, .fFdGkQ .currentScore {
            min-width: 16px;
            position: relative;
        }

        .match_won {
            color: var(--on-surface-nLv1);
            text-align: center;
            font: 400 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }

        .ilbQji {
            display: flex;
            position: relative;
            height: 24px;
            min-width: 16px;
            padding-top: 2px;
        }

        .kphZwG > * + * {
                margin-top: 8px;
        }

        .player_container {
            background-color: lightblue;
            height: 40px;
            width: 40px;
            margin-left: 1px;
            margin-right: 1px;
            border-radius: 50%;
        }

        .ihwaOf {
            width: 40px;
            color: var(--on-color-primary);
            text-align: center;
            font: 700 18px / 40px "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }

        .double_margin {
            margin-right: -8px;
        }

        .kWtIQi {
            position: absolute;
            top: 24px;
            left: 24px;
        }

        .ivSrTP {
            background-color: var(--surface-s1);
            margin-top: 8px;
            margin-bottom: 8px;
            padding-top: 8px;
            padding-bottom: 8px;
            border-radius: 16px;
            box-shadow: 0 1px 4px var(--effect-elevation);
            text-align: center;
        }

        .jLRkRA {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
        }

        .dlyXLO {
            display: flex;
            padding: 8px 16px;
        }

        .hwgeMK {
            height: 16px;
            width: 16px;
        }

        svg {
            vertical-align: top;
        }

        .crsNnE {
            display: flex;
            -webkit-box-pack: center;
            justify-content: center;
            flex-direction: column;
        }

        .bttEbg {
            display: flex;
            margin-left: 8px;
        }

        .dDJgpy {
            color: var(--on-surface-nLv3);
            text-align: left;
            font: 400 12px / 16px "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            letter-spacing: -0.2px;
        }

        .bkqxZg {
            overflow: hidden;
            color: var(--on-surface-nLv1);
            text-align: left;
            font: 400 14px / 16px "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            letter-spacing: -0.2px;
        }

        .ittMsX {
            display: inline-block;
            background-color: var(--on-surface-nLv1);
            position: relative;
            top: -3px;
            height: 4px;
            width: 4px;
            margin-left: 8px;
            margin-right: 8px;
            border-radius: 50%;
        }

        .mMMTG {
            display: flex;
            padding: 8px 16px;
        }

        .bIarbf {
            object-fit: contain;
        }

        .crsNnE {
            display: flex;
            -webkit-box-pack: center;
            justify-content: center;
            flex-direction: column;
        }

        .bttEbg {
            display: flex;
            margin-left: 8px;
        }

        .bYlnHB {
            margin-left: auto;
            padding-left: 8px;
        }

        .dlyXLO {
            display: flex;
            padding: 8px 16px;
        }

        .jbiuyT {
            height: 16px;
            width: 16px;
            object-fit: cover;
        }

        .ictZTN {
            background-color: var(--terrain-grass);
            height: 16px;
            width: 16px;
            border-radius: 50%;
        }

        .tb_score {
            position: absolute;
            top: 0px;
            left: 9px;
            color: var(--on-surface-nLv1);
            text-align: left;
            font: 400 10px / 1 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            vertical-align: super;
        }

        .score_container {
            width: 100%;
        }

    </style>

    <script>
        // Function to get a cookie
        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function updateHyperlink() {
            const type = getCookie('selectedType');
            const year = getCookie('selectedYear');
            const link = document.getElementById('back-url');
            
            if (!link) return; // If the link does not exist, exit the function
            
            let url = new URL(link.href);
            
            // Set or update 'type' parameter if available
            if (type) {
                url.searchParams.set('type', type);
            }
            
            // Set or update 'year' parameter if available
            if (year) {
                url.searchParams.set('year', year);
            }
            
            link.href = url.toString();
        }

        // Initialize the hyperlink update on page load
        window.onload = updateHyperlink;
    </script>
</head> 
<body>
    <div style="background-color: #374df5; display: flex; justify-content: space-between;padding: 5px;">
        <a id="back-url" href="/match?u={{ match_data.Match.player1 }}">
            <div style="width: 40px;text-align: center;vertical-align: middle;">       
                <!--<span style="color: white;font-weight: 800; font-size: 20px;">&lt;</span>-->
                <svg width="24px" height="24px" viewBox="-102.4 -102.4 1228.80 1228.80" fill="#FFFFFF" class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg" stroke="#FFFFFF" stroke-width="86.01599999999999"><g id="SVGRepo_bgCarrier" stroke-width="0"><rect x="-102.4" y="-102.4" width="1228.80" height="1228.80" rx="0" fill="#374df5" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M669.6 849.6c8.8 8 22.4 7.2 30.4-1.6s7.2-22.4-1.6-30.4l-309.6-280c-8-7.2-8-17.6 0-24.8l309.6-270.4c8.8-8 9.6-21.6 2.4-30.4-8-8.8-21.6-9.6-30.4-2.4L360.8 480.8c-27.2 24-28 64-0.8 88.8l309.6 280z" fill=""></path></g></svg>
            </div>
        </a>
        <a href="/tennis/update/{{ match_data.Match.tennis_id }}?u={{ match_data.Match.player1 }}&return_url={{ request.url }}">
            <div>       
                <svg width="24px" height="24px" viewBox="-2.4 -2.4 28.80 28.80" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#FFFFFF"><g id="SVGRepo_bgCarrier" stroke-width="0"><rect x="-2.4" y="-2.4" width="28.80" height="28.80" rx="0" fill="#374df5" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M20.1498 7.93997L8.27978 19.81C7.21978 20.88 4.04977 21.3699 3.32977 20.6599C2.60977 19.9499 3.11978 16.78 4.17978 15.71L16.0498 3.84C16.5979 3.31801 17.3283 3.03097 18.0851 3.04019C18.842 3.04942 19.5652 3.35418 20.1004 3.88938C20.6356 4.42457 20.9403 5.14781 20.9496 5.90463C20.9588 6.66146 20.6718 7.39189 20.1498 7.93997V7.93997Z" stroke="#FFFFFF" stroke-width="1.8719999999999999" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
            </div>
        </a>
    </div>
    <!-- Header panel -->
    {% set is_doubles = match_data.Match.type == 'D' %}
    <div class="Box bPNjiv">
        <div display="flex" class="Box Flex dlyXLO bnpRyo">
            <div display="flex" direction="column" class="Box Flex ggRYVx kphZwG">
                <div class="Box lfqAOf">
                    <div display="flex" direction="row" class="Box Flex ggRYVx iZgchw">
                        <div display="flex" class="Box Flex ddaRLc kFvGEE">
                            <div class="Box cORqut{% if is_doubles%} double_margin{% endif %}">
                                <div class="Box cORqut">
                                    <a href="/match?u={{ match_data.Match.player1 }}">
                                        <div class="Box player_container">
                                            <div class="ihwaOf">
                                                {{ match_data.player1_first_name[0] if match_data.player1_first_name }}{{ match_data.player1_last_name[0] if match_data.player1_last_name }}
                                            </div>
                                        </div>
                                    </a>
                                    <div class="Box HwWyM">
                                        <img src="https://www.sofascore.com/static/images/flags/us.png" width="16" height="16" class="Img hpocRq">
                                    </div>
                                </div>
                                {% if match_data.Match.player1_seed %}
                                <div display="inline-flex" class="Box Flex kHVrPs kshPLE">
                                    <span color="surface.s1" class="Text gprDYG">{{ match_data.Match.player1_seed if match_data.Match.player1_seed }}</span>
                                </div>
                                {% endif %}
                            </div>
                            {% if is_doubles%}
                            <div class="Box cORqut">
                                <div class="Box cORqut">
                                    <a href="/match?u={{ match_data.Match.player3 }}">
                                        <div class="Box player_container">
                                            <div class="ihwaOf">
                                                {{ match_data.player3_first_name[0] if match_data.player3_first_name }}{{ match_data.player3_last_name[0] if match_data.player3_last_name }}
                                            </div>
                                        </div>
                                    </a>
                                    <div class="Box kWtIQi">
                                        <img src="https://www.sofascore.com/static/images/flags/us.png" width="16" height="16" class="Img hpocRq">
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            <div class="Box gtmGgU">
                                <bdi class="Text jzDXwu">{{ match_data.player1_first_name }} {{ match_data.player1_last_name }}</bdi>
                                <bdi color="onSurface.nLv3" class="Text hKtpIg">{{ match_data.player1_number }}</bdi>
                                {% if is_doubles%}
                                <bdi class="Text jzDXwu">{{ match_data.player3_first_name }} {{ match_data.player3_last_name }}</bdi>
                                <bdi color="onSurface.nLv3" class="Text hKtpIg">{{ match_data.player3_number }}</bdi>
                                {% endif %}
                                
                            </div>
                        </div>                        
                    </div>
                </div>
                <div class="Box lfqAOf">
                    <div display="flex" direction="row" class="Box Flex ggRYVx iZgchw">
                        <div display="flex" class="Box Flex ddaRLc kFvGEE">
                            <div class="Box cORqut{% if is_doubles%} double_margin{% endif %}">
                                <div class="Box cORqut">
                                    <!--
                                    <img src="https://api.sofascore.app/api/v1/team/50641/image" width="40" height="40" alt="Vekić D." class="Img jbaYme">
                                    -->
                                    <a href="/match?u={{ match_data.Match.player2 }}">
                                        <div class="Box player_container">
                                            <div class="ihwaOf">
                                                {{ match_data.player2_first_name[0] if match_data.player2_first_name }}{{ match_data.player2_last_name[0] if match_data.player2_last_name }}
                                            </div>
                                        </div>
                                    </a>
                                    <div class="Box HwWyM">
                                        <img src="https://www.sofascore.com/static/images/flags/us.png" width="16" height="16" class="Img hpocRq">
                                    </div>
                                    {% if match_data.Match.player2_seed %}
                                    <div display="inline-flex" class="Box Flex kHVrPs kshPLE">
                                        <span color="surface.s1" class="Text gprDYG">{{ match_data.Match.player2_seed if match_data.Match.player2_seed }}</span>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            {% if is_doubles%}
                            <div class="Box cORqut">
                                <div class="Box cORqut">
                                    <a href="/match?u={{ match_data.Match.player4 }}">
                                        <div class="Box player_container">
                                            <div class="ihwaOf">
                                                {{ match_data.player4_first_name[0] if match_data.player4_first_name }}{{ match_data.player4_last_name[0] if match_data.player4_last_name }}
                                            </div>
                                        </div>
                                    </a>
                                    <div class="Box kWtIQi">
                                        <img src="https://www.sofascore.com/static/images/flags/us.png" width="16" height="16" class="Img hpocRq">
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            <div class="Box gtmGgU">
                                <bdi class="Text jzDXwu">{{ match_data.player2_first_name }} {{ match_data.player2_last_name }}</bdi>
                                <bdi color="onSurface.nLv3" class="Text hKtpIg">{{ match_data.player2_number }}</bdi>
                                {% if is_doubles%}
                                <bdi class="Text jzDXwu">{{ match_data.player4_first_name }} {{ match_data.player4_last_name }}</bdi>
                                <bdi color="onSurface.nLv3" class="Text hKtpIg">{{ match_data.player4_number }}</bdi>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div display="flex" direction="column" class="Box Flex eJCdjm dsybxc">
                <div display="flex" class="Box Flex hQZSQ gyrVAS">
                    <div display="flex" direction="column" class="Box Flex hELCex cIAUBs">
                        {%  set team1_set1_won = (match_data.Match.team1_set1 if match_data.Match.team1_set1 is not none else 0) >= (match_data.Match.team2_set1 if match_data.Match.team2_set1 is not none else 0) %}
                        <div class="Box cORqut">
                            <div display="flex" direction="column" class="Box Flex jTiCHC MkeW sc-eeDRCY gvJSKx score-box" style="background-color:unset !important">
                                <div class="score_container">
                                    <span color="onSurface.nLv1" class="Text {% if team1_set1_won %}won_score{% else %}lost_score{% endif %} currentScore" style="font-weight:bold;font-size:14px">{{ match_data.Match.team1_set1 if match_data.Match.team1_set1 is not none }}</span>
                                </div>
                                <sup font-size="micro" class="tb_score">{{ match_data.Match.team1_set1_tb if match_data.Match.team1_set1_tb is not none }}</sup>
                            </div>
                        </div>
                        <div class="Box cORqut">
                            <div display="flex" direction="column" class="Box Flex jTiCHC MkeW sc-eeDRCY gvJSKx score-box" style="background-color:unset !important">
                                <div class="score_container">
                                    <span color="onSurface.nLv3" class="Text {% if team1_set1_won %}lost_score{% else %}won_score{% endif %} currentScore" style="font-weight:bold;font-size:14px">{{ match_data.Match.team2_set1 if match_data.Match.team2_set1 is not none }}</span>
                                </div>
                                <sup font-size="micro" class="tb_score">{{ match_data.Match.team2_set1_tb if match_data.Match.team2_set1_tb is not none }}</sup>
                            </div>
                        </div>
                    </div>
                    {% set has_set2 = (match_data.Match.team1_set2 is not none) %}
                    <div display="flex" direction="column" class="Box Flex hELCex cIAUBs" {% if not has_set2 %}style="display: none;"{% endif %}>
                        {%  set team1_set2_won = (match_data.Match.team1_set2 if match_data.Match.team1_set2 is not none else 0) >= (match_data.Match.team2_set2 if match_data.Match.team2_set2 is not none else 0) %}
                        <div class="Box cORqut">
                            <div display="flex" direction="column" class="Box Flex jTiCHC MkeW sc-eeDRCY gvJSKx score-box" style="background-color: unset !important;">
                                <div class="score_container">
                                    <span color="onSurface.nLv3" class="Text {% if team1_set2_won %}won_score{% else %}lost_score{% endif %} currentScore" style="font-weight:bold;font-size:14px">{{ match_data.Match.team1_set2 if match_data.Match.team1_set2 is not none }}</span>
                                </div>
                                <sup font-size="micro" class="tb_score">{{ match_data.Match.team1_set2_tb if match_data.Match.team1_set2_tb is not none }}</sup>
                            </div>
                        </div>
                        <div class="Box cORqut">
                            <div display="flex" direction="column" class="Box Flex jTiCHC MkeW sc-eeDRCY gvJSKx score-box" style="background-color: unset !important;">
                                <div class="score_container">
                                    <span color="onSurface.nLv1" class="Text {% if team1_set2_won %}lost_score{% else %}won_score{% endif %} currentScore" style="font-weight:bold;font-size:14px">{{ match_data.Match.team2_set2 if match_data.Match.team2_set2 is not none }}</span>
                                </div>
                                <sup font-size="micro" class="tb_score">{{ match_data.Match.team2_set2_tb if match_data.Match.team2_set2_tb is not none }}</sup>
                            </div>
                        </div>
                    </div>
                    {% set has_set3 = (match_data.Match.team1_set3 is not none) %}
                    <div display="flex" direction="column" class="Box Flex hELCex cIAUBs" {% if not has_set3 %}style="display: none;"{% endif %}>
                        {%  set team1_set3_won = (match_data.Match.team1_set3 if match_data.Match.team1_set3 is not none else 0) >= (match_data.Match.team2_set3 if match_data.Match.team2_set3 is not none else 0) %}
                        <div class="Box cORqut">
                            <div display="flex" direction="column" class="Box Flex jTiCHC MkeW sc-eeDRCY gvJSKx score-box" style="background-color: unset !important;">
                                <div class="score_container">
                                    <span color="onSurface.nLv3" class="Text {% if team1_set3_won %}won_score{% else %}lost_score{% endif %} currentScore" style="font-weight:bold;font-size:14px">{{ match_data.Match.team1_set3 if match_data.Match.team1_set3 is not none }}</span>
                                </div>
                                <sup font-size="micro" class="tb_score">{{ match_data.Match.team1_set3_tb if match_data.Match.team1_set3_tb is not none }}</sup>
                            </div>
                        </div>
                        <div class="Box cORqut">
                            <div display="flex" direction="column" class="Box Flex jTiCHC MkeW sc-eeDRCY gvJSKx score-box" style="background-color: unset !important;">
                                <div class="score_container">
                                    <span color="onSurface.nLv1" class="Text {% if team1_set3_won %}lost_score{% else %}won_score{% endif %} currentScore" style="font-weight:bold;font-size:14px">{{ match_data.Match.team2_set3 if match_data.Match.team2_set3 is not none }}</span>
                                </div>
                                <sup font-size="micro" class="tb_score">{{ match_data.Match.team2_set3_tb if match_data.Match.team2_set3_tb is not none }}</sup>
                            </div>
                        </div>
                    </div>
                    {% set team1_sets_won = 0 %}
                    {% set team2_sets_won = 0 %}

                    {% if team1_set1_won %}
                        {% set team1_sets_won = team1_sets_won + 1 %}
                    {% else %}
                        {% set team2_sets_won = team2_sets_won + 1 %}
                    {% endif %}

                    {% if has_set2 %}
                        {% if team1_set2_won %}
                            {% set team1_sets_won = team1_sets_won + 1 %}
                        {% else %}
                            {% set team2_sets_won = team2_sets_won + 1 %}
                        {% endif %}
                    {% endif %}

                    {% if has_set3 %}
                        {% if team1_set3_won %}
                            {% set team1_sets_won = team1_sets_won + 1 %}
                        {% else %}
                            {% set team2_sets_won = team2_sets_won + 1 %}
                        {% endif %}
                    {% endif %}

                    <div display="flex" direction="column" class="Box Flex fxruDL bnvMps">
                        <div display="flex" class="Box Flex bSuBER kFvGEE">
                            <div class="VerticalDivider yZqSj"></div>
                            <div display="flex" direction="column" class="Box Flex ilbQji MkeW sc-iHGNWf fFdGkQ score-box" style="background-color:undefined !important">
                                <span color="onSurface.nLv3" class="Text {% if match_data.Match.team1_won %}match_won{% else %}match_lost{% endif %} currentScore" style="font-weight: bold; font-size: 18px;">{{ team1_sets_won }}</span>
                            </div>
                        </div>
                        <div display="flex" class="Box Flex bSuBER kFvGEE">
                            <div class="VerticalDivider yZqSj"></div>
                            <div display="flex" direction="column" class="Box Flex ilbQji MkeW sc-iHGNWf fFdGkQ score-box" style="background-color:undefined !important">
                                <span color="onSurface.nLv1" class="Text {% if match_data.Match.team1_won %}match_lost{% else %}match_won{% endif %} currentScore" style="font-weight: bold; font-size: 18px;">{{ team2_sets_won }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Details panel-->
    <div elevation="2" class="Box ivSrTP">
        <div display="flex" class="Box Flex dlyXLO jLRkRA">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="var(--on-surface-nLv1)" class="SvgWrapper hwgeMK">
                <g id="Asset-Exportable/Icon/Material/ic_calendar_date" stroke="none" stroke-width="1" fill="var(--on-surface-nLv1)" fill-rule="evenodd" w="16px" h="16px"><g id="ic_calendar_date"><polygon id="Bounds" fill-opacity="0.4" opacity="0" points="0 0 24 0 24 24 0 24"></polygon><path d="M22,2 L22,12.11 C21.43,11.52 20.75,11.03 20,10.68 L20,8 L4,8 L4,20 L10.68,20 C11.03,20.75 11.52,21.43 12.11,22 L2,22 L2,2 L22,2 Z M17,12 C18.13,12 19.17,12.37 20,13 C21.21,13.91 22,15.37 22,17 C22,19.76 19.76,22 17,22 C15.37,22 13.91,21.21 13,20 C12.37,19.17 12,18.13 12,17 C12,14.24 14.24,12 17,12 Z M17.5,14 L16.5,14 L16.5,17.51 L18.62,19.63 L19.33,18.93 L17.5,17.1 L17.5,14 Z M20,4 L4,4 L4,6 L20,6 L20,4 Z" id="Combined-Shape"></path></g></g>
            </svg>
            <div display="flex" direction="column" class="Box Flex bttEbg crsNnE">
                <span color="onSurface.nLv3" letter-spacing="-0.2px" class="Text dDJgpy">Date and time</span>
                {% set formatted_date = "%d/%d/%d"|format(match_data.Match.date.year, match_data.Match.date.month, match_data.Match.date.day) %}
                <span color="onSurface.nLv1" letter-spacing="-0.2px" overflow="hidden" class="Text bkqxZg">{{ formatted_date }}
                    {% set duration_minutes = match_data.Match.duration %}
                    {% set hours = duration_minutes // 60 %}
                    {% set minutes = duration_minutes % 60 %}
                    <div display="inline-block" class="Box ittMsX"></div>
                    {% if hours > 0 %}
                        {{ '{}h{}m'.format(hours, minutes) if minutes > 0 else '{}h'.format(hours) }}
                    {% else %}
                        {{ '{}m'.format(minutes) if minutes > 0 else '0m' }}
                    {% endif %}
                    <div display="inline-block" class="Box ittMsX"></div>
                    <a href="/tennis/uploadpage/{{ match_data.Match.tennis_id }}">{{ match_data.Match.tennis_id }}</a>
                </span>
            </div>
        </div>
        <a href="{{ match_data.Match.match_link }}">
            <div display="flex" class="Box Flex mMMTG jLRkRA">
                <img src="/match/logo/{{ match_data.tournament_logo }}" width="16" height="16" class="Img bIarbf">
                <div display="flex" direction="column" class="Box Flex bttEbg crsNnE">
                    <span color="onSurface.nLv3" letter-spacing="-0.2px" class="Text dDJgpy">Competition</span>
                    <span color="onSurface.nLv1" letter-spacing="-0.2px" overflow="hidden" class="Text bkqxZg">
                        {{ match_data.Match.match_name }}, {{ match_data.Match.match_level }}, {{ match_data.Match.match_event }}, {{ match_data.Match.match_draw }}, {{ match_data.Match.match_round }}
                    </span>
                </div>
                <div class="Box bYlnHB">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="var(--primary-default)" class="SvgWrapper fyGiev"><path fill="var(--primary-default)" d="M6 2 4.59 3.41 9.17 8l-4.58 4.59L6 14l6-6z"></path>
                    </svg>
                </div>
            </div>
        </a>
        <div display="flex" class="Box Flex dlyXLO jLRkRA">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="var(--on-surface-nLv1)" class="SvgWrapper hwgeMK"><path d="M2 4v16h20V4H2zm10 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-8 1h2V9H4V6h7v2.14c-1.72.45-3 2-3 3.86 0 1.86 1.28 3.41 3 3.86V18H4v-3zm16-6h-2v6h2v3h-7v-2.14c1.72-.45 3-2 3-3.86 0-1.86-1.28-3.41-3-3.86V6h7v3z" w="16px" h="16px" fill="var(--on-surface-nLv1)"></path>
            </svg>
            <div display="flex" direction="column" class="Box Flex bttEbg crsNnE">
                <span color="onSurface.nLv3" letter-spacing="-0.2px" class="Text dDJgpy">Venue</span>
                <span color="onSurface.nLv1" letter-spacing="-0.2px" overflow="hidden" class="Text bkqxZg">
                    {{ match_data.Match.location }}
                    <div display="inline-block" class="Box ittMsX"></div>
                    {% if match_data.Match.is_indoor %}Indoor{% else %}Outdoor{% endif %}
                </span>
            </div>
        </div>
        <div display="flex" class="Box Flex dlyXLO jLRkRA">
            <img src="https://www.sofascore.com/static/images/flags/us.png" alt="US" class="Img jbiuyT">
            <div display="flex" direction="column" class="Box Flex bttEbg crsNnE">
                <span color="onSurface.nLv3" letter-spacing="-0.2px" class="Text dDJgpy">Location</span>
                <span color="onSurface.nLv1" letter-spacing="-0.2px" overflow="hidden" class="Text bkqxZg">{{ match_data.Match.match_city }}, {{ match_data.Match.match_state }}</span>
            </div>
        </div>
        <div display="flex" class="Box Flex dlyXLO jLRkRA">
            <!--<div class="Box ictZTN"></div>-->
            <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="SvgWrapper hwgeMK"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9 3V5M12 3V5M15 3V5M13 9H9M15 13H9M8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V7.2C19 6.0799 19 5.51984 18.782 5.09202C18.5903 4.71569 18.2843 4.40973 17.908 4.21799C17.4802 4 16.9201 4 15.8 4H8.2C7.0799 4 6.51984 4 6.09202 4.21799C5.71569 4.40973 5.40973 4.71569 5.21799 5.09202C5 5.51984 5 6.07989 5 7.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
            <div display="flex" direction="column" class="Box Flex bttEbg crsNnE">
                <span color="onSurface.nLv3" letter-spacing="-0.2px" class="Text dDJgpy">Note</span>
                <span color="onSurface.nLv1" letter-spacing="-0.2px" overflow="hidden" class="Text bkqxZg" id="note"><span>
                {% macro newline_to_br(text) %}
                    {% if text is not none %}
                        {{ text.replace('\n', '<br>') | safe }}
                    {% endif %}
                {% endmacro %}
                <script>
                    const noteText = `{{ newline_to_br(match_data.Match.comments) }}`;
                    
                    const maxLength = 200;
                    const noteElement = document.getElementById('note');

                    var sliced = false;
                    var toggled = false;
            
                    if (noteText.length > maxLength) {
                        noteElement.innerHTML = noteText.slice(0, maxLength) + '...';
                        sliced = true;
                        toggled = true;
                    } else {
                        noteElement.innerHTML = noteText;
                    }
            
                    noteElement.addEventListener('dblclick', () => {
                        if (sliced) {
                            if (toggled) {
                                noteElement.innerHTML = noteText;
                                toggled = false;
                            } else {
                                noteElement.innerHTML = noteText.slice(0, maxLength) + '...';
                                toggled = true;
                            }
                        }
                        
                    });
                </script>
            
            </div>
        </div>
        <div display="flex" class="Box Flex dlyXLO jLRkRA">
            <!--<div class="Box ictZTN"></div>-->
            {% set formatted_reflection = match_data.reflection|display_reflection %}
            <a href="/reflection?tennis_id={{ match_data.Match.tennis_id }}&next={{ request.url }}{% if not formatted_reflection %}&is_new=true{% endif %}&category=Match">
            <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="SvgWrapper hwgeMK">
                <!-- Tennis Ball -->
                <circle cx="12" cy="12" r="10" fill="#4CAF50" stroke="black" stroke-width="1"/>
                
                <!-- Tennis Ball Lines -->
                <path d="M8 8 Q12 4 16 8" stroke="black" stroke-width="1" fill="none"/>
                <path d="M8 16 Q12 20 16 16" stroke="black" stroke-width="1" fill="none"/>
            </svg>
            </a>
            <style>
                 .reflection-text {
    font-family: 'San Francisco', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    font-size: 16px;  /* Base font size for readability */
    line-height: 1.6;  /* Increased line height for readability */
    color: #333;  /* Dark gray text for good contrast */
    max-width: 800px;
    padding: 20px;
    background-color: #f9f9f9;  /* Light background for a clean appearance */
    margin: 0;  /* Removed margin */
    border-radius: 8px;  /* Rounded corners for a modern look */
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);  /* Subtle shadow for depth */
}

.reflection-text i {
    font-weight: 600;
    color: #007bff;  /* Highlight color for labels */
}

.reflection-text p {
    margin: 0;
    padding: 6px 0;  /* Slight padding for readability */
}

.reflection-text h2 {
    color: #222;  /* Darker color for section headings */
    font-weight: 700;
    margin-bottom: 12px;  /* Spacing below headings */
    font-size: 20px;  /* Slightly larger font size for main headings */
}

.reflection-text h3 {
    color: #444;  /* More visible color for subheadings */
    font-weight: 400;  /* Normal weight for better readability */
    font-style: italic;  /* Italicized for distinction */
    margin-bottom: 8px;  /* Spacing below subheadings */
    font-size: 16px;  /* Slightly smaller font size for subheadings */
}

.reflection-text .content-box {
    border: 1px solid #ddd;
    border-radius: 8px;  /* Rounded corners for the box */
    padding: 15px;
    background-color: #fff;  /* White background for contrast */
    margin-bottom: 16px;  /* Space below content boxes */
}

.reflection-text ul {
    list-style-type: disc;  /* Standard bullet points */
    padding-left: 20px;  /* Indentation for list items */
    margin: 0;
}

.reflection-text ul li {
    margin-bottom: 6px;  /* Space between list items */
    color: #333;  /* Consistent text color for list items */
}

@media (max-width: 600px) {
    .reflection-text {
        font-size: 14px;  /* Adjust font size for smaller screens */
        padding: 10px;
    }
}

            </style>
            <div display="flex" direction="column" class="Box Flex bttEbg crsNnE">
                <span color="onSurface.nLv3" letter-spacing="-0.2px" class="Text dDJgpy">Reflection</span>
                <span color="onSurface.nLv1" letter-spacing="-0.2px" overflow="hidden" class="Text bkqxZg reflection-text">
                    {% if formatted_reflection %}
                    {{ formatted_reflection|safe }}
                    {% endif %}
                <span>
            </div>
        </div>
    </div>
    <!-- End Details panel-->

    <!-- image files -->
    {% if image_files %}
    <div elevation="2" class="Box ivSrTP">
        {% for image in image_files %}
            <img src="/tennis_images/{{ image }}" alt="Image {{ loop.index }}" style="width: 95%; height: auto;" ondblclick="confirmDelete('{{ image }}')">
        {% endfor %}
    </div>
    {% endif %}

    <script>
        function confirmDelete(image) {
            var result = confirm("Are you sure you want to delete this image?");
            if (result) {
                fetch(`/tennis_images/${image}`, {
                    method: 'DELETE'
                })
                .then(response => {
                    if (response.ok) {
                        location.reload();
                    } else {
                        alert('Failed to delete the image.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while trying to delete the image.');
                });
            }
        }
    </script>

    <!-- All scores panel -->
    <!-- Render scores_html as raw HTML -->
    {{ scores_html | safe }}
    <!-- End All scores panel -->
</body>
</html>