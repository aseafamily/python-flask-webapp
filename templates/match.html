<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user_name }}'s Matches</title>
    <style>
        :root {
            --on-color-primary: #ffffff;
            --on-surface-nLv1:#222226;
            --on-surface-nLv3:rgba(34, 34, 38, 0.45);
            --error-default:#c7361f;
        }

        html {
            font-size: 14px;
            line-height: 1.15;
            text-size-adjust: 100%;
        }
        body {
            width: 100%;
            font-family: "Sofascore Sans", "Arial Unicode MS", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-weight: 400;
            color: var(--on-surface-nLv1);
            background-color: #edf1f6;
            font-feature-settings: "kern";
            font-kerning: normal;
            margin: 0px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding-bottom: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .jLRkRA {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
        }
        .cMLRbb {
            display: flex;
            min-height: 48px;
            padding-left: 12px;
            padding-right: 12px;
        }
        .bIarbf {
            object-fit: contain;
        }
        .iWGVcA {
            display: flex;
            flex-direction: column;
        }
        .gFVOUS {
            display: flex;
            margin-left: 12px;
        }
        .dDpJHe {
            margin-top: 2px;
            color: var(--on-surface-nLv3);
            text-align: left;
            font: 400 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }
        .kTgHLG {
            margin-right: 12px;
            color: var(--on-surface-nLv3);
            text-align: left;
            font: 500 12px / 1.33 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }
        a {
            text-decoration: none;
            background-color: transparent;
        }
        .match_item {
            display: block;
            border-radius: 2px;
            margin-bottom: 4px;
        }
        .hshtw {
            -webkit-box-align: center;
            align-items: center;
            position: relative;
            color: var(--on-surface-nLv1);
        }
        .cQgcrM {
            display: flex;
        }
        .cBIkhT {
            display: flex;
            height: 48px;
        }
        .bVjijM {
            position: absolute;
            top: 2px;
            left: 4px;
            width: calc(100% - 8px);
            height: 44px;
            overflow: hidden;
        }
        .dUEAfq {
            position: relative;
            width: 100%;
            height: 44px;
            transform: translate(-100%);
            background-color: rgba(203, 24, 24, 0.1);
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
            opacity: 0;
            transition: opacity 300ms ease-out 0s;
        }
        .jKVshf {
            margin-left: 2px;
            margin-right: 2px;
            text-align: center;
            flex: 0 0 56px;
            -webkit-box-flex: 0;
        }
        .kcRyBI {
            color: var(--on-surface-nLv3);
            text-align: left;
            font: 400 12px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }
        bdi {
            unicode-bidi: isolate;
        }
        .fFdGkQ {
            position: relative;
            border: 1px solid transparent;
            overflow: hidden;
        }
        .cRYpNI {
            display: flex;
            -webkit-box-align: center;
            align-items: center;
            flex-direction: column;
        }
        .jTiCHC {
            display: flex;
            position: relative;
            height: 17px;
            min-width: 16px;
        }
        .fFdGkQ .currentScore {
            min-width: 16px;
            position: relative;
        }
        .won_score {
            color: var(--on-surface-nLv1);
            text-align: center;
            font: 400 15px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }
        .eFoirc {
            width: 56px;
            color: var(--on-surface-nLv3);
            text-align: center;
            display: block;
            font: 400 12px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            text-overflow: ellipsis;
            overflow-x: clip;
            white-space: nowrap;
            min-width: 0px;
        }
        .ljKzEw {
            background-color: rgba(34, 34, 38, 0.15);
            height: 36px;
            margin-right: 8px;
            flex: 0 0 1px;
        }
        .dtLxRI {
            overflow-x: clip;
            min-width: 0px;
            -webkit-box-flex: 1;
            flex-grow: 1;
        }
        .lkDlwE {
            overflow-x: clip;
            min-width: 0px;
            flex: 1 1 100px;
        }
        .khxXvq {
            display: flex;
            margin-bottom: 2px;
        }
        .hYFYfq {
            height: 16px;
            width: 16px;
            margin-right: 8px;
        }
        .hpocRq {
            border-radius: 50%;
            object-fit: cover;
        }
        .lost_name {
            color: var(--on-surface-nLv3);
            text-align: left;
            font: 400 15px "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            text-overflow: ellipsis;
            overflow-x: clip;
            white-space: nowrap;
            min-width: 0px;
        }
        .won_name {
            color: var(--on-surface-nLv1);
            text-align: left;
            font: 400 15px "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            text-overflow: ellipsis;
            overflow-x: clip;
            white-space: nowrap;
            min-width: 0px;
        }
        .hdXfIu {
            display: flex;
            align-self: center;
        }
       .eqGkKN {
            display: flex;
            margin-right: 8px;
            align-self: center;
        }
        .hxgrMp {
            flex: 0 1 auto;
        }
        .bPbaIT {
            display: flex;
            height: 16px;
            margin-bottom: 2px;
        }
        .iNZtrx {
            display: inline-block;
            position: relative;
            width: 24px;
            text-align: left;
        }
        .Nhgnl {
            display: flex;
            align-items: flex-start;
            flex-direction: column;
        }
        .gpiIdD {
            display: flex;
            position: relative;
            height: 17px;
            width: 24px;
            min-width: 16px;
        }
        .lost_score {
            color: var(--on-surface-nLv3);
            text-align: center;
            font: 400 15px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }
        .tb_score {
            position: absolute;
            top: 0px;
            left: 14px;
            color: var(--on-surface-nLv1);
            text-align: left;
            font: 400 10px / 1 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            vertical-align: super;
        }
        .fYUXNw {
            display: flex;
            height: 16px;
        }
        .gQLOTH {
            background-color: rgba(34, 34, 38, 0.15);
            height: 36px;
            margin-right: 10px;
            flex: 0 0 1px;
        }
        .jJDgZs {
            margin-right: 12px;
            flex: 0 1 auto;
        }
        .ibdrtp {
            color: var(--on-surface-nLv1);
            text-align: center;
            font: 400 14px / 1.14 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            text-overflow: ellipsis;
            overflow-x: clip;
            white-space: nowrap;
            min-width: 0px;
        }
        .lost_sign {
            background-color: var(--error-default);
            height: 24px;
            width: 24px;
            margin-left: 1px;
            margin-right: 1px;
            border-radius: 50%;
        }
        .won_sign {
            background-color: #0bb32a;
            height: 24px;
            width: 24px;
            margin-left: 1px;
            margin-right: 1px;
            border-radius: 50%;
        }
        .ihwaOf {
            width: 24px;
            color: var(--on-color-primary);
            text-align: center;
            font: 700 14px / 24px "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
        }
        .diff-indicator {
            display: flex;
            height: 2px;
        }
        .tb_seed {
            top: 0px;
            left: 14px;
            color: var(--on-surface-nLv1);
            text-align: left;
            font: 400 11px / 1 "Sofascore Sans", -apple-system, system-ui, BlinkMacSystemFont, Dubai, "Segoe UI", Tahoma, "Noto Sans Arabic UI", "Dejavu Sans", Arial, sans-serif;
            vertical-align: super;
            margin-left: 5px;
            margin-top: -3px;
        }

.player_profile {
    color: #fff;
    width: 100%;
    padding: 12px;
}
.player_name {
    padding: 0;
    text-transform: uppercase;
    font-size: 1.5rem;
    line-height: 1.5rem;
}
.player_row {
    display: flex;
    justify-content: space-between;
}
.player-stats {
    margin-top: 5px;
    display: flex;
    justify-content: space-between;
}
.player-stats, .player-stats label, .player-stats select, .player-stats select option {
    font-size: 15px;
}
.player-stats-details {
    display: flex;
    margin-top: 5px;
}
.player-stats-details .type {
    margin-right: 8px;
}
    </style>

<script>
    // Function to set a cookie
    function setCookie(name, value, days) {
        const d = new Date();
        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
        let expires = "expires=" + d.toUTCString();
        document.cookie = name + "=" + (value || "") + ";" + expires + ";path=/";
    }

    function handleTypeSelection() {
        const selectElement = document.getElementById('type-select');
        const selectedValue = selectElement.value;

        setCookie('selectedType', selectedValue, 7); // Save cookie for 7 days

        const url = new URL(window.location.href);
        url.searchParams.set('type', selectedValue);

        window.location.href = url.toString();
    }

    function handleYearSelection() {
        const selectElement = document.getElementById('year-select');
        const selectedValue = selectElement.value;

        setCookie('selectedYear', selectedValue, 7); // Save cookie for 7 days

        const url = new URL(window.location.href);
        url.searchParams.set('year', selectedValue);

        window.location.href = url.toString();
    }
    
    function generateYearOptions() {
        const selectElement = document.getElementById('year-select');
        const currentYear = new Date().getFullYear();
        const startYear = 2016;
        
        // Generate and append year options
        for (let year = currentYear; year >= startYear; year--) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            selectElement.appendChild(option);
        }
    }
</script>

</head>
<body>
    <div class="container">
        <div style="background-color: #374df5; display: flex; justify-content: space-between;padding: 5px;">
            <div class="player_profile">
                <div class="player_row">
                    <div class="player_name">
                        <span>{{ player.first_name }} {{ player.last_name }}</span>
                    </div>
                    <div>
                        <a href="#" id="masonry-link">
                            <div style="text-align: center;vertical-align: middle;">       
                                <span style="color: white; font-size: 20px;">Masonry View</span>
                            </div>
                        </a>
                    </div>
                    <script>
                        // Get the current URL
                        const currentUrl = window.location.href;
                
                        // Create a new URL object from the current URL
                        const url = new URL(currentUrl);
                
                        // Set or update the query string parameter
                        url.searchParams.set('view', '1'); // Change 'param' and 'value' as needed
                
                        // Update the href attribute of the link
                        document.getElementById('masonry-link').href = url.href;
                    </script>
                    <div>
                        <a href="/">
                            <div style="text-align: center;vertical-align: middle;">       
                                <span style="color: white; font-size: 20px;">Home</span>
                            </div>
                        </a>
                    </div>
                </div>                
                
                <div class="player-stats">
                    <div class="player-stats-details">
                        <div class="type">Singles:</div>
                        <div class="wins">{{ stats.singles_won }} - {{ stats.singles_all - stats.singles_won }}<span class="stat-label">
                            {% if stats.singles_all != 0 %}
                                ({{ ((stats.singles_won / stats.singles_all) * 100) | round | int }}%)
                            {% endif %}
                        </span></div>
                    </div>
                    <div class="player-stats-details">
                        <div class="type">Doubles:</div>
                        <div class="wins">{{ stats.doubles_won }} - {{ stats.doubles_all - stats.doubles_won }}<span class="stat-label">
                            {% if stats.doubles_all != 0 %}
                                ({{ ((stats.doubles_won / stats.doubles_all) * 100) | round | int }}%)
                            {% endif %}
                        </span></div>
                    </div>
                </div>

                <div class="player-stats">
                    <div>
                        <label for="type-select">Type:</label>
                        <select id="type-select" name="type" onchange="handleTypeSelection()">
                            <option value="all">All</option>
                            <option value="s">Singles</option>
                            <option value="d">Doubles</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                    <div>
                        <label for="year-select">Year:</label>
                        <select id="year-select" name="type" onchange="handleYearSelection()">
                            <option value="all">All</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function setSelectedOptions() {
                generateYearOptions();

                const urlParams = new URLSearchParams(window.location.search);
                
                const type = urlParams.get('type');
                const selectElement = document.getElementById('type-select');
                if (type) {
                    selectElement.value = type;
                }

                const year = urlParams.get('year');
                const selectYearElement = document.getElementById('year-select');
                if (year) {
                    selectYearElement.value = year;
                }
            }

            setSelectedOptions();
        </script>
        
        <!-- Start results iteration -->
        {% for match_data in results %}
            {% if match_data.show_match_name %}
        <div class="Box klGMtt"><div display="flex" class="Box cMLRbb jLRkRA">
            <img src="/match/logo/{{ match_data.tournament_logo }}" 
                width="auto" 
                height="36" 
                class="Img bIarbf"
                onerror="this.onerror=null; this.src='/match/logo/PNW';"
                ondblclick="window.location.href='/tennis/uploadpage/{{ match_data.tournament_logo }}';">
            <div display="flex" direction="column" class="Box gFVOUS iWGVcA">
                <a href="{{ match_data.match.match_link }}" target="_blank">
                    <bdi class="dDpJHe">{{ match_data.match.match_level }}: {{ match_data.match.match_name }}</bdi>
                </a>
                <span class="kTgHLG">{{ match_data.match.match_city }}, {{ match_data.match.match_state }} - {{ match_data.event_name }}</span>
            </div>
        </div>
            {% endif %}
        <a class="match_item" href="/match/{{ match_data.match.id }}">
            <div>
                <div display="flex" class="Box cBIkhT cQgcrM hshtw">
                    <div class="Box klGMtt bVjijM"><div class="dUEAfq"></div></div>
                    <div class="Box jKVshf">
                        {% set formatted_date = "%02d/%d/%d"|format(match_data.match.date.year % 100, match_data.match.date.month, match_data.match.date.day) %}
                        <bdi font-size="12" class="kcRyBI">{{ formatted_date }}</bdi>
                        <div display="flex" direction="column" class="Box jTiCHC cRYpNI fFdGkQ">
                            <span class="currentScore" style="font-weight: normal; font-size: 14px;">
                                <bdi font-size="12" class="eFoirc">{{ match_data.round_name }}</bdi>
                            </span>
                        </div>
                    </div>
                    <div class="Box ljKzEw"></div>
                    <div class="Box dtLxRI">
                        <div display="flex" class="Box ggRYVx jLRkRA">
                            <div class="Box lkDlwE">
                                <div display="flex" class="Box khxXvq jLRkRA">
                                    {% if match_data.match.type == 'S' %}
                                    <div class="Box hYFYfq">
                                        <img src="https://www.sofascore.com/static/images/flags/us.png" alt="USA" width="16" height="16" class="Img hpocRq">
                                    </div>
                                    {% endif %}
                                    <bdi class="{% if match_data.match.team1_won %}won_name{% else %}lost_name{% endif %}">{{ match_data.team1_name }}</bdi>
                                    <sup font-size="micro" class="tb_seed">
                                        {% if match_data.match.player1 == 0 %}
                                            {{ match_data.match.player1_usta | divide_and_format if match_data.match.player1_usta is not none else "" }}
                                        {% else %}
                                            {% if match_data.match.type == 'S' %}
                                                {{ match_data.match.player1_utr | divide_and_format if match_data.match.player1_utr is not none else "" }}
                                            {% endif %}
                                        {% endif %}
                                    </sup>
                                </div>
                                <div display="flex" class="Box ggRYVx jLRkRA">
                                    {% if match_data.match.type == 'S' %}
                                    <div class="Box hYFYfq">
                                        <img src="https://www.sofascore.com/static/images/flags/us.png" alt="USA" width="16" height="16" class="Img hpocRq">
                                    </div>
                                    {% endif %}
                                    <bdi class="{% if match_data.match.team1_won %}lost_name{% else %}won_name{% endif %}">{{ match_data.team2_name }}</bdi>
                                    <sup font-size="micro" class="tb_seed">
                                        {% if match_data.match.player1 != 0 and match_data.match.type == 'S' %}
                                            {{ match_data.match.player2_utr | divide_and_format if match_data.match.player2_utr is not none else "" }}
                                        {% endif %}
                                    </sup>
                                </div>
                            </div>
                            <div display="flex" class="Box eqGkKN hdXfIu">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="#0bb32a" class="SvgWrapper fyGiev">
                                    <path fill="#0bb32a" d="M13.09 7.13 4.53 2 3 2.87v10.26l1.53.87 8.56-5.13z" fill-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="Box hxgrMp">
                                <div display="flex" class="Box bPbaIT cQgcrM">
                                    <div d="inline-block" class="Box iNZtrx">
                                        <div display="flex" direction="column" class="Box gpiIdD Nhgnl fFdGkQ">
                                            <span class="{% if match_data.match.team1_won %}won_score{% else %}lost_score{% endif %} currentScore">{{ match_data.match.team1_set1 if match_data.match.team1_set1 is not none else "" }}</span>
                                        </div>
                                        <sup font-size="micro" class="tb_score">{{ match_data.match.team1_set1_tb if match_data.match.team1_set1_tb is not none else "" }}</sup>
                                    </div>
                                    <div d="inline-block" class="Box iNZtrx">
                                        <div display="flex" direction="column" class="Box gpiIdD Nhgnl fFdGkQ">
                                            <span class="{% if match_data.match.team1_won %}won_score{% else %}lost_score{% endif %} currentScore">{{ match_data.match.team1_set2 if match_data.match.team1_set2 is not none else "" }}</span>
                                        </div>
                                        <sup font-size="micro" class="tb_score">{{ match_data.match.team1_set2_tb if match_data.match.team1_set2_tb is not none else "" }}</sup>
                                    </div>
                                    <div d="inline-block" class="Box iNZtrx">
                                        <div display="flex" direction="column" class="Box gpiIdD Nhgnl fFdGkQ">
                                            <span class="{% if match_data.match.team1_won %}won_score{% else %}lost_score{% endif %} currentScore">{{ match_data.match.team1_set3 if match_data.match.team1_set3 is not none else "" }}</span>
                                        </div>
                                        <sup font-size="micro" class="tb_score">{{ match_data.match.team1_set3_tb if match_data.match.team1_set3_tb is not none else "" }}</sup>
                                    </div>
                                </div>
                                <div display="flex" class="Box fYUXNw cQgcrM">
                                    <div d="inline-block" class="Box iNZtrx">
                                        <div display="flex" direction="column" class="Box gpiIdD Nhgnl fFdGkQ">
                                            <span class="{% if match_data.match.team1_won %}lost_score{% else %}won_score{% endif %} currentScore">{{ match_data.match.team2_set1 if match_data.match.team2_set1 is not none else "" }}</span>
                                        </div>
                                        <sup font-size="micro" class="tb_score">{{ match_data.match.team2_set1_tb if match_data.match.team2_set1_tb is not none else "" }}</sup>
                                    </div>
                                    <div d="inline-block" class="Box iNZtrx">
                                        <div display="flex" direction="column" class="Box gpiIdD Nhgnl fFdGkQ">
                                            <span class="{% if match_data.match.team1_won %}lost_score{% else %}won_score{% endif %} currentScore">{{ match_data.match.team2_set2 if match_data.match.team2_set2 is not none else "" }}</span>
                                        </div>
                                        <sup font-size="micro" class="tb_score">{{ match_data.match.team2_set2_tb if match_data.match.team2_set2_tb is not none else "" }}</sup>
                                    </div>
                                    <div d="inline-block" class="Box iNZtrx">
                                        <div display="flex" direction="column" class="Box gpiIdD Nhgnl fFdGkQ">
                                            <span class="{% if match_data.match.team1_won %}lost_score{% else %}won_score{% endif %} currentScore">{{ match_data.match.team2_set3 if match_data.match.team2_set3 is not none else "" }}</span>
                                        </div>
                                        <sup font-size="micro" class="tb_score">{{ match_data.match.team2_set3_tb if match_data.match.team2_set3_tb is not none else "" }}</sup>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="Box gQLOTH"></div>
                    <div class="Box jJDgZs">
                        <div class="ibdrtp" style="overflow: visible;">
                            <div class="Box {% if match_data.match.team1_won %}won_sign{% else %}lost_sign{% endif %}">
                                <div class="ihwaOf">{% if match_data.match.team1_won %}W{% else %}L{% endif %}</div>
                            </div>
                            {% if match_data.match.team1_won %}
                                {% set win_count = stats.singles_won + stats.doubles_won - match_data.wins + 1 %}
                                <div style="font-size: 11px; text-align: center; margin-top: 3px;{% if win_count % 10 == 0 %}font-weight: bold;color:#0bb32a;{% endif %}">{{ win_count }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div display="flex" class="Box diff-indicator" style="width:{{ match_data.diff_indicator }}%;background-color:{% if match_data.match.team1_won %}#0bb32a; float: left;{% else %}var(--error-default);float:right;{% endif %}"></div>
            </div>
        </a>
        {% endfor %}
        <!-- End results iteration -->

    </div>
</body>
</html>
